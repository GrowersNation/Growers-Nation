<div data-role="page" class="page-map" id="roast_map" style="width:100%; height:100%;">
	<div data-role="header" data-position="fixed" id="header"><a href="index.html" data-icon="gear" class="ui-btn-right">Options</a><h2>Growers Nation</h2></div>
	
	<div data-role="content" style="width:100%; height:100%; padding:0;">
		<div id="map_canvasRoast" style="width:100%; height:100%;"></div>
	</div>
	
	<div data-role="footer" data-position="fixed" id="toolbar"></div>
</div>

<style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0; overflow: hidden;}
      #map_canvasRoast {width: 100%; }
</style>
    
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDbm_tgr-6BMbH6BxoG2Sl2U_YAGIESjII&sensor=true">
</script>

<script type="text/javascript">
	$(document).ready(function() {
		if(navigator.geolocation) {
			detectBrowser();
			navigator.geolocation.getCurrentPosition(function(position){
				initMap(position.coords.latitude,position.coords.longitude);
			});
		}
		else{
			detectBrowser();
			initMap(52.636161,-1.133065);
		}
	});

	var center;
	var map = null;
	
	function initMap(lat,lng) {
		center = new google.maps.LatLng(lat,lng);
			var myOptions = {
			zoom: 14,
			center: center,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		}
	
		map = new google.maps.Map(document.getElementById("map_canvasRoast"), myOptions);
	}
	
	function detectBrowser() {
		var useragent = navigator.userAgent;
		var mapdivMap = document.getElementById("map_canvasRoast");
		
		console.log();
		
		if (useragent.indexOf('iPhone') != -1 || useragent.indexOf('Android') != -1 ) {
			//mapdivMap.style.width = '100%';
			mapdivMap.style.height = '100%';
		} 
		else {
			//mapdivMap.style.width = '100%';
			mapdivMap.style.height = calculateHeight() + 'px';
		}
	};
	
	function calculateHeight() {
		return $(window).height() - $("#header").height();
	}
</script>